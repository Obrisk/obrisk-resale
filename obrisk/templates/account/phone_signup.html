{% extends 'account/base-min.html' %}
{% load i18n %}
{% load static %}
{% load account socialaccount %}
{% load crispy_forms_tags %}
{% block head %}
<title>{% trans 'Account Signup' %}</title>
<script src="{% static 'js/jquery.min.js' %}" type="text/javascript"></script>
{% endblock head %}

{% block content %}
<script>
	function disableSubmit() {
		document.getElementById("submit").disabled = true;
	}

	function activateButton(element) {

		if (element.checked) {
			document.getElementById("submit").disabled = false;
		}
		else {
			document.getElementById("submit").disabled = true;
		}

	}
</script>

<div class="limiter">
	<div class="container-login100">
		<div class="wrap-login100 p-l-85 p-r-85 p-t-55 p-b-55">
			<span class="login100-form-title p-b-32">{% trans 'Account Creation' %}</span>
			<span class="txt3">
				<p>{% blocktrans %}Already have an account? Then please sign in <a href="{{ login_url }}">
						here</a>.{% endblocktrans %}</p>
			</span>

			<form class="signup" id="signup_form" method="post" action="{% url 'users:signup' %}">
				{% csrf_token %}
				<h5 class="text-center mt-3">Please enter your address. </h5>
				<div class="input-group mb-3 mt-4">
					<div class="input-group-prepend">
						<label class="input-group-text" for="province">Province</label>
					</div>
					<select class="custom-select" id="province" name="province"></select>
				</div>

				<div class="input-group mb-3">
					<div class="input-group-prepend">
						<label class="input-group-text" for="city">City</label>
					</div>
					<select class="custom-select" id="city" name="city"> </select>
				</div>

				<form id="verify-code-form">
					Phone no: <input type="tel" pattern="[1][0-9]{10}" name="phone_number" id="phone-no" required>
					<button class="btn btn-dark" id="send-code"> Send </button>
					<p id="code-notice"><p>
				</form>

				<form id="phone-verify-form">					
					Code:<input type="tel" pattern="[0-9]{6}" name="code" required>
					<input id="cached_phone" name="cached_phone" type="hidden">
					<button class="btn btn-dark" type="submit" id="phone-verify"> Verify </button>
				</form>

				{{ form|crispy }}
				<input id="verified_phone" name="verified_phone" type="hidden">
				<input type="checkbox" name="terms" id="terms" onchange="activateButton(this)">
				I Agree to <a href="{% url 'terms_and_conditions' %}">Terms & Conditions </a> and to abide with the
				laws and regulations of the country residing.</a>

				{% if redirect_field_value %}
				<input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
				{% endif %}
				<div class="form-group container-login100-form-btn justify-content-center mt-4">
					<button disabled type="submit" id="submit" class="login100-form-btn">{% trans 'Sign Up' %}
						&raquo;</button>
				</div>
			</form>
		</div>
	</div>
</div>
<script src="{% static 'js/user-form.js' %}" type="text/javascript"> </script>
<script src="{% static 'js/bootstrap.min.js' %}" type="text/javascript"></script>

{% endblock content %}