{% extends "account/base.html" %}

{% load i18n %}
{% load account %}
{% load static %}
{% load crispy_forms_tags %}

{# block head_title %}{% trans "Password Reset" %}{% endblock #}
{% block inner %}

<div class="row">
    <div class="page-wrapper col-lg-8 col-md-10 m-auto">

            <h1>{% trans "Password Reset" %}</h1>
            {% if user.is_authenticated %}
            {% include "account/snippets/already_logged_in.html" %}
            {% endif %}

            <p>{% trans "Have you Forgotten your password? Enter your phone number you used when signing up and we will send you the verification code first!" %}</p>

            <form method="POST" action="{% url 'users:phone_password_reset' %}" class="password_reset mb-0">
                {% csrf_token %}
                {{ form|crispy }}

                <small class="text-muted phone_label mt-0" id="phone_label"> Don't include the country code!</small>
                <br>

                <button class="btn btn-dark" id="send-code" type="button"> Reset </button>

                
                <div id="code-notice" style="font-weight:bold;"></div>

                <div class="form-row" id="code">
                <label class="mr-2"> Code: </label>
                <div class="d-flex">
                    <input class="form-control col-xs-6" type="tel" pattern="[0-9]{6}" name="code" id="code">
                    <button class="btn btn-dark code-btn ml-2 col-xs-2" type="button" id="phone-verify" > Verify </button>
                </div>

                </div>
                <div id="results" style="font-weight:bold;"> </div>
            </form>
            

            <a href="{% url 'account_reset_password' %}"
                    class="btn btn-link pull-right">{% trans 'Use email Address' %}</a>

            <br/> <br/>
            
            <small>{% blocktrans %}If you have any problem, please
            <a href="mailto:support@obrisk.com" > click here </a> to contact us or via WechatID: 
			<span style="font-weight:bold; color: #0aeee3"> Obrisk. </span>.{% endblocktrans %}</small>

        </div>
    </div>
  
{% endblock %}

  {% block scripts %}
  <script src="{% static 'js/popper.min.js' %}" type="text/javascript"></script>
  <script src="{% static 'js/jquery.min.js' %}" type="text/javascript"></script>
  <script src="{% static 'js/bootstrap.min.js' %}" type="text/javascript"></script>
  <script src="{% static 'js/bootbox.min.js' %}" type="text/javascript"></script>


  <script type="text/javascript"> 
	var current_url = "{{ request.path }}"; 
    var errors = false;
  </script>
  <script src="{% static 'js/user-form.js' %}?v=21" type="text/javascript"> </script>
  
  {% endblock scripts %}