function printError(e,t){template=`\n        <div class="notification is-danger" role="alert">\n            <button type="button" class="delete close-dj-messages"></button>\n          ${e}\n        </div>\n        `,$(""+t).prepend(template)}$((function(){const e=JSON.parse(localStorage.getItem("new-classified"));e&&(document.getElementById("id_title").value=e.title,document.getElementById("id_details").value=e.details,document.getElementById("id_price").value=e.price),$("body").on("uploadComplete",(function(e){$("input[name='status']").val("A"),$("#id_images").val(images),$("#id_img_error").val(img_error),$.ajax({url:"/classifieds/write-new-classified/",data:$("form").serialize(),type:"POST",cache:!1,success:function(e){"200"==e.status?window.location.replace("/classifieds/"):(console.log(e),printError(e.error_message,"#classified-form"),window.scrollTo({top:0,behavior:"smooth"}))},error:function(e){void 0!==e.error_message?printError(e.error_message,"#classified-form"):printError("Sorry we can't process your request, please try again later","#classified-form")}})})),$("#addBtn").click((function(){$("#uploader").show()})),$(".submit-button").click((function(e){const t=$("#id_phone_number").val();void 0!==t&&""!=t&&0==t.val().startsWith("+86")&&(11==t.val().length?t.val("+86"+t.val()):printError("Your phone number is incorrect, Please verify","#classified-form")),uploader.fileStats.totalFilesNum>0?""!=images&&$("#id_images").val()==images?$("body").trigger("uploadComplete"):$("body").trigger("submitClicked"):printError("Please provide all the details and upload at least 1 image","#classified-form")})),""===user&&document.getElementsByClassName("login-to-post")[0].addEventListener("click",(function(){let e=Object.fromEntries(new FormData(document.querySelector("form")));localStorage.setItem("new-classified",JSON.stringify(e))})),document.getElementById("cancel-classified").addEventListener("click",(function(){localStorage.removeItem("new-classified")}))}));