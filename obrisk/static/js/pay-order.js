function wxpayFail(){document.getElementsByClassName("notification")[0].classList.remove("is-hidden"),document.getElementById("notf-msg").innerHTML="Sorry payments feature is now unavailable, contact the seller directly",setTimeout(()=>{window.location.href=slugURL},7e3)}document.addEventListener("DOMContentLoaded",(function(){wx.ready((function(){if(dataError.length>1)wxpayFail(),console.log(dataError);else try{wx.chooseWXPay({timestamp:timestamp,nonceStr:nonceStr,package:packge,signType:signType,paySign:paySign,trigger:function(e){console.log(JSON.stringify(e))},success:function(e){let o=null,n=null;getCookie("classified-order-is-offline")||(o=getCookie("classified-order-phone"),n=getCookie("classified-order-address")),fetch(paySuccessURL,{method:"POST",body:JSON.stringify({addr:n,phone:o,sg:slug}),headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",redirect:"follow"}).then(e=>e.json()).then(e=>{let o=JSON.parse(e);!0===o.success&&(window.location.replace="classifieds/orders/wsguatpotlfwccdi/"+o.order_slug)})},fail:function(e){wxpayFail(),console.log(JSON.stringify(e))},cancel:function(e){window.location.replace=slugURL}})}catch{wxpayFail(),console.log("failure to init payments, exception happened")}})),wx.error((function(e){wxpayFail(),console.log(e)}))}));