function wxpayFail(){document.getElementsByClassName("notification")[0].classList.remove("is-hidden"),document.getElementById("notf-msg").innerHTML="Sorry payments feature is currently unavailable, contact the seller directly",setTimeout(()=>{window.location.href=slugURL},7e3)}document.addEventListener("DOMContentLoaded",(function(){fetch(wxCredURL,{headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",redirect:"follow"}).then(e=>e.json()).then(e=>{try{let t=JSON.parse(e);!0===t.success?wx.config({debug:!1,appId:t.id,timestamp:t.timestamp,nonceStr:t.noncestr,signature:t.signature,jsApiList:["chooseWXPay"]}):(wxpayFail(),console.log("failure to init wx"))}catch{wxpayFail(),console.log("failure to init wx")}}),wx.ready((function(){if(dataError.length>1)wxpayFail(),console.log(dataError);else try{wx.chooseWXPay({timestamp:timestamp,nonceStr:nonceStr,package:packge,signType:signType,paySign:paySign,trigger:function(e){console.log(JSON.stringify(e))},success:function(e){let t=null,o=null;getCookie("classified-order-is-offline")||(t=getCookie("classified-order-phone"),o=getCookie("classified-order-address")),fetch(paySuccessURL,{method:"POST",body:JSON.stringify({addr:o,phone:t,sg:slug}),headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",redirect:"follow"}).then(e=>e.json()).then(e=>{let t=JSON.parse(e);!0===t.success&&(window.location.replace="classifieds/orders/wsguatpotlfwccdi/"+t.order_slug)})},fail:function(e){wxpayFail(),console.log(JSON.stringify(e))},cancel:function(e){window.location.replace=slugURL}})}catch{wxpayFail(),console.log("failure to init payments, exception happened")}})),wx.error((function(e){wxpayFail(),console.log(e)}))}));